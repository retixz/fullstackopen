{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/PersonsDisplay.js","components/Error.js","services/persons.js","App.js","index.js"],"names":["Filter","search","handleSearch","value","onChange","PersonForm","newEntry","newName","handleName","newNumber","handleNumber","onSubmit","type","PersonsDisplay","persons","handleDelete","map","person","id","name","number","onClick","Error","message","className","baseUrl","axios","get","then","response","data","post","delete","newObject","put","App","useState","setPersons","setNewName","setNewNumber","newResults","setNewResults","setSearch","errorMessage","setErrorMessage","useEffect","personService","window","confirm","find","filter","event","target","toUpperCase","results","includes","preventDefault","forEach","updatedPerson","catch","error","setTimeout","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.66f75c74.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ search, handleSearch }) => {\r\n  return (\r\n    <div>\r\n      filter shown with : <input value={search} onChange={handleSearch} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newEntry,\r\n  newName,\r\n  handleName,\r\n  newNumber,\r\n  handleNumber,\r\n}) => {\r\n  return (\r\n    <>\r\n      <h2>add a new</h2>\r\n      <form onSubmit={newEntry}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleName} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst PersonsDisplay = ({ persons, handleDelete }) => {\r\n  return (\r\n    <ul>\r\n      {persons.map((person) =>\r\n        person.id ? (\r\n          <div key={person.id}>\r\n            <li>\r\n              {person.name} {person.number}{\" \"}\r\n              <button onClick={() => handleDelete(person.id)}>delete</button>\r\n            </li>\r\n          </div>\r\n        ) : null\r\n      )}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default PersonsDisplay;\r\n","import React from \"react\";\r\n\r\nconst Error = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"error\">{message}</div>;\r\n};\r\n\r\nexport default Error;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (person) => {\r\n  return axios.post(baseUrl, person);\r\n};\r\n\r\nconst deleteEntry = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`);\r\n};\r\n\r\nconst updateNumber = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, deleteEntry, updateNumber };\r\n","import React, { useState, useEffect, cloneElement } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport PersonsDisplay from \"./components/PersonsDisplay\";\nimport Error from \"./components/Error\";\nimport personService from \"./services/persons\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newResults, setNewResults] = useState([{}]);\n  const [search, setSearch] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((persons) => setPersons(persons));\n  }, []);\n\n  const newEntry = (event) => {\n    event.preventDefault();\n    if (\n      persons.find(\n        (person) => person.name === newName || person.number === newNumber\n      )\n    ) {\n      // Check if already exists in phonebook\n      persons.forEach((person) => {\n        if (person.name === newName && person.number !== newNumber) {\n          if (\n            window.confirm(\n              `${newName} is already added to phonebook do you want to update the old number?`\n            )\n          ) {\n            const newObject = { ...person, number: newNumber };\n            personService\n              .updateNumber(person.id, newObject)\n              .then((updatedPerson) => {\n                setPersons(\n                  persons.map((person) =>\n                    person.name !== newName ? person : updatedPerson\n                  )\n                );\n              })\n              .catch((error) => {\n                setErrorMessage(error.response.data.error);\n                setTimeout(() => {\n                  setErrorMessage(null);\n                }, 5000);\n              });\n          }\n        } else if (person.name !== newName && person.number === newNumber) {\n          setErrorMessage(`${newNumber} is already added to phonebook`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        }\n      });\n    } else {\n      // Add new person\n      const person = {\n        name: newName,\n        number: newNumber,\n      };\n      personService\n        .create(person)\n        .then((response) => {\n          //Create new person and update UI\n          setPersons(persons.concat(person));\n          personService.getAll().then((persons) => setPersons(persons));\n        })\n        .catch((error) => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleName = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleDelete = (id) => {\n    if (\n      window.confirm(\n        `Delete ${persons.find((person) => person.id === id).name} ?`\n      )\n    )\n      personService.deleteEntry(id).then(() => {\n        setPersons(persons.filter((person) => person.id !== id)); //delete from all persons display\n        setNewResults(newResults.filter((person) => person.id !== id)); //delete from search result display\n      });\n  };\n\n  const handleSearch = (event) => {\n    setSearch(event.target.value);\n    const filter = event.target.value.toUpperCase();\n    const results = persons.filter((person) =>\n      person.name.toUpperCase().includes(filter)\n    );\n\n    if (results) setNewResults(results);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Filter handleSearch={handleSearch} />\n      <PersonForm\n        newEntry={newEntry}\n        newName={newName}\n        handleName={handleName}\n        handleNumber={handleNumber}\n        newNumber={newNumber}\n      />\n\n      <h2>Numbers</h2>\n      <Error message={errorMessage} />\n\n      {newResults && search ? (\n        <PersonsDisplay persons={newResults} handleDelete={handleDelete} /> //Display search results\n      ) : (\n        <PersonsDisplay persons={persons} handleDelete={handleDelete} /> //Display all persons\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}